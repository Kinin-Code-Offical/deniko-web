# ğŸ—„ï¸ Database & Prisma

This directory contains the database schema and migration history for the project.

## ğŸ“„ Files

- **`schema.prisma`**: The single source of truth for the database schema. It defines the data models, relationships, and the database connection.
- **`migrations/`**: A history of SQL migrations generated by Prisma. **Do not edit these files manually.**

## âš™ï¸ Configuration (Prisma 7+)

This project uses **Prisma 7**, which handles configuration differently than previous versions.

- **`prisma.config.ts`**: This file (located in the project root) is responsible for loading environment variables and configuring the database connection URL.
- **Note:** The `datasource` block in `schema.prisma` **does not** contain the `url` field. It is injected dynamically by `prisma.config.ts`.

## ğŸ› ï¸ Common Commands

- **`npx prisma generate`**: Updates the `@prisma/client` node module to match the current schema. Run this after changing `schema.prisma`.
- **`npx prisma migrate dev`**: Creates a new migration from schema changes and applies it to the development database.
- **`npx prisma studio`**: Opens a visual editor for the database in your browser.
- **`npx prisma db push`**: Pushes the schema state to the database without creating a migration file (useful for prototyping).

## ğŸ—ƒï¸ Models

- **User:** The central authentication entity.
- **TeacherProfile / StudentProfile:** Role-specific data linked to the User.
- **Lesson:** Represents a scheduled tutoring session.
- **Payment:** Tracks financial transactions.

## âš ï¸ Important

- **Foreign Keys:** We use foreign keys to ensure data integrity.
- **Indexes:** Critical fields (like email, slugs) are indexed for performance.
- **Enums:** We use database-level enums for fixed values (e.g., `UserRole`, `LessonStatus`).
